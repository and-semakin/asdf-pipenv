#!/usr/bin/env bash

function findPython {
  local versionCommand="import sys; print(''.join(map(str, sys.version_info[:2])))"

  # python3 is preferred
  local python3Version=$(python3 -c "${versionCommand}" 2>&1 | grep -Po '^(\d+)$' || true)
  local pythonVersion=$(python -c "${versionCommand}" 2>&1 | grep -Po '^(\d+)$' || true)

  if [[ ! -z "$python3Version" ]]
  then
    # check python3 version
    if [[ "$python3Version" -gt "35" ]]
    then
      # use python3
      echo python3
      return 0
    fi
  else
    # fallback to python
    if [[ ! -z "$pythonVersion" ]]
    then
      # check python version
      if [[ "$pythonVersion" -gt "35" ]]
      then
        # use python
        echo python
        return 0
      fi
    fi
  fi
}
